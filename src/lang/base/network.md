# 计算机网络
对于同一台设备上的进程间通信，有很多种方式，比如有{管道，消息队列、共享内存、信号}等方式，而对于不同设备上的进程间通信，就需要网络**通信**，而设备是多样性的，所以要兼容多种多样的设备，就协商出了一套通用的网络协议。
## 分组交换
电路交换与分组交换
#1. 电路交换
电路交换用于电话通信系统，两个用户要通信之前需要建立一条专用的物理链路，并且在整个通信过程中始终占用该链路。由于通信的过程中不可能一直在使用传输线路，因此电路交换对线路的利用率很低，往往不到 10%。

#2. 分组交换
每个分组都有首部和尾部，包含了源地址和目的地址等控制信息，在同一个传输线路上同时传输多个分组互相不会影响，因此在同一条传输线路上允许同时传输多个分组，也就是说*分组交换不需要占用传输线路*。

在一个邮局通信系统中，邮局收到一份邮件之后，先存储下来，然后把相同目的地的邮件一起转发到下一个目的地，这个过程就是存储转发过程，分组交换也使用了存储转发过程

## 时延
总时延 = 排队时延 + 处理时延 + 传输时延 + 传播时延
![](https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/4b2ae78c-e254-44df-9e37-578e2f2bef52.jpg)
## 应用层

所以，应用层只需要专注于为用户提供应用功能，比如 HTTP、FTP、Telnet、DNS、SMTP等。
## 传输层
实现应用到应用的通信
在传输层会有两个传输协议，分别是 TCP 和 UDP。

TCP 的全称叫传输控制协议（Transmission Control Protocol），大部分应用使用的正是 TCP 传输层协议，比如 HTTP 应用层协议。TCP 相比 UDP 多了很多特性，比如*流量控制*、超时*重传*、*拥塞控制*等，这些都是为了保证数据包能可靠地传输给对方。

UDP 相对来说就很简单，简单到只负责发送数据包，不保证数据包是否能抵达对方，但它实时性相对更好，传输效率也高。当然，UDP 也可以实现可靠传输，把 TCP 的特性在应用层上实现就可以，不过要实现一个商用的可靠 UDP 传输协议，也不是一件简单的事情。
### 粘包 拆包
UDP不会粘包的原因
UDP是面向无连接的协议，它不像TCP协议那样需要建立连接，数据的传输也不保证可靠性。因此，在UDP协议下，不会出现TCP粘包的情况。

UDP协议在发送数据时，并不会像TCP协议那样对数据进行*拆分和重组*，它是以用户数据报的方式进行传输的。在发送端，数据被分成一个个用户数据报，每个用户数据报都包含一个标识符，接收端根据标识符来识别不同的数据包，从而避免了TCP粘包的问题。

同时，UDP协议也没有TCP协议那样的*拥塞控制和流量控制*等机制，数据传输的速度更快，因此也不容易出现TCP粘包的问题
## 网络层
![net-net_app-app](https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost4@main/%E7%BD%91%E7%BB%9C/https/%E7%BD%91%E7%BB%9C%E5%B1%82.png)
传输层的设计理念是简单、高效、专注，如果传输层还负责这一块功能就有点违背*设计原则*了

网络层负责将数据从一个设备传输到另一个设备

因此，需要将 IP 地址分成两种意义：
- 一个是*网络号*，负责标识该 IP 地址是属于哪个「子网」的；
- 一个是*主机号*，负责标识同一「子网」下的不同主机；
网络接口层的传输单位是帧（frame），IP 层的传输单位是包（packet），TCP 层的传输单位是段（segment），HTTP 的传输单位则是消息或报文（message）。但这些名词并没有什么本质的区分，可以**统称为数据包**。

